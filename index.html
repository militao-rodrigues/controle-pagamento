<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controle de Pagamento</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f5f5f5;
}

.resumo {
    position: fixed;
    top: 0;
    width: 100%;
    background: white;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    z-index: 1000;
}

.container {
    margin-top: 190px;
    padding: 20px;
}

@media (max-width: 768px) {
    h2 { font-size: 18px; }
    table { font-size: 14px; }
}

table {
    width: 100%;
    border-collapse: collapse;
    background: white;
}

th, td {
    padding: 10px;
    border-bottom: 1px solid #ddd;
}

tr:hover {
    background: #f0f0f0;
}

tr.checked {
    background: #FFFACD;
}

button {
    padding: 8px 15px;
    cursor: pointer;
    border: none;
    background: #333;
    color: white;
    border-radius: 5px;
    margin-top: 10px;
}

button:hover {
    background: #555;
}
</style>
</head>

<body>

<div class="resumo">
    <h2>Controle de Pagamento - Total: R$ 30.000,00</h2>
    <p><strong>Saldo Restante:</strong> <span id="saldo">R$ 28.000,00</span></p>
    <p><strong>Total Pago:</strong> <span id="pago">R$ 2.000,00</span></p>
    <button onclick="selectAll()">Select All</button>
</div>

<div class="container">
<table>
<thead>
<tr>
    <th>CompetÃªncia</th>
    <th>Valor</th>
    <th>Pagar</th>
</tr>
</thead>
<tbody id="tabelaPagamentos"></tbody>
</table>
</div>

<script>

const totalContrato = 30000;
let pagoAtual = 2000;

const inicioAno = 2023;
const inicioMes = 6; // Julho (0=Jan)

let ano = inicioAno;
let mes = inicioMes;

const meses = [
"Jan","Fev","Mar","Abr","Mai","Jun",
"Jul","Ago","Set","Out","Nov","Dez"
];

const tabela = document.getElementById("tabelaPagamentos");

for (let parcela = 1; parcela <= 58; parcela++) {

    let valor = 500;
    if (parcela === 2) valor = 1500;

    let checked = parcela === 1 || parcela === 2 ? "checked" : "";

    const linha = `
        <tr class="${checked}">
            <td>${meses[mes]}/${ano}</td>
            <td class="valor">${valor}</td>
            <td><input type="checkbox" onchange="atualizar(this)" ${checked}></td>
        </tr>
    `;

    tabela.innerHTML += linha;

    mes++;
    if (mes > 11) {
        mes = 0;
        ano++;
    }
}

function atualizar(checkbox) {

    const row = checkbox.closest("tr");
    const valor = parseFloat(row.querySelector(".valor").innerText);

    if (checkbox.checked) {
        row.classList.add("checked");
        pagoAtual += valor;
    } else {
        row.classList.remove("checked");
        pagoAtual -= valor;
    }

    atualizarValores();
}

function selectAll() {

    const checkboxes = document.querySelectorAll("tbody input[type=checkbox]");
    let todosMarcados = [...checkboxes].every(cb => cb.checked);

    pagoAtual = 0;

    checkboxes.forEach(cb => {

        cb.checked = !todosMarcados;

        const row = cb.closest("tr");
        const valor = parseFloat(row.querySelector(".valor").innerText);

        if (!todosMarcados) {
            row.classList.add("checked");
            pagoAtual += valor;
        } else {
            row.classList.remove("checked");
        }
    });

    atualizarValores();
}

function atualizarValores() {

    let saldo = totalContrato - pagoAtual;

    document.getElementById("pago").innerText =
        pagoAtual.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});

    document.getElementById("saldo").innerText =
        saldo.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
}

</script>

</body>
</html>
